<!doctype html>
<html id="inbox1">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link href="https://authorservices.wiley.com/asset/cdn/fonts/OpenSans/OpenSans.css" rel="stylesheet">
    <link href="styles/styles.css" rel="stylesheet"/>

    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
     <script src="https://authorservices.wiley.com/asset/cdn/js/jquery/jquery.1.11.1.min.js"></script>
    <script src="config.json"></script>
</head>
<body>
<script id="handlebars-demo" type="text/x-handlebars-template">
<div class="gmail-inbox">
    <div id="fromLine">Wiley Transfer Desk</div>
    <div id="subjectline"><a href="email.html?userid={{participantid}}"><strong>{{emailSubjectLine}}</strong> {{previewText}}</a></div>
</div>
</script>

<script>

var template = $('#handlebars-demo').html();

var searchParams = new URLSearchParams(document.location.search);
emailConfig = {};
emailConfig.userid = searchParams.get("userid");

config.tests.forEach(function(test){
    if(test.participantid==emailConfig.userid) emailConfig = test;
});

emailConfig.emailSubjectLine = "Transfer recommendations for " + emailConfig.manuscriptTitle;
emailConfig.previewText="Based on analysis of your manuscript, we have identified journals";


var templateScript = Handlebars.compile(template);
var context = emailConfig;
var html = templateScript(context);
$(document.body).append(html);

</script>

</body>
</html>
